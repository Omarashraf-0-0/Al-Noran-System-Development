# ๐ ูุธุงู Forget Password ูุน OTP

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูููุฐ ูุธุงู ูุงูู ูุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู OTP (One-Time Password) ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู.

---

## ๐ฏ ุงูุณููุงุฑูู ุงููุงูู

### 1๏ธโฃ **Forget Password Page**
- ุงููุณุชุฎุฏู ูุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุงูุชุญูู ูู ูุฌูุฏ ุงูุจุฑูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ **ุฅุฐุง ููุฌูุฏ**: ุฅุฑุณุงู OTP ุนุจุฑ ุงูุจุฑูุฏ
- โ **ุฅุฐุง ุบูุฑ ููุฌูุฏ**: ุฑุณุงูุฉ "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ูุณุฌู ูุฏููุง"

### 2๏ธโฃ **OTP Page**
- ุงููุณุชุฎุฏู ูุฏุฎู ุฑูุฒ ุงูุชุญูู (6 ุฃุฑูุงู)
- **ุงููุฏุฉ**: 5 ุฏูุงุฆู ููุท
- **ุงููุญุงููุงุช**: 5 ูุญุงููุงุช ูุญุฏ ุฃูุตู
- **ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู**: 3 ูุฑุงุช ูุญุฏ ุฃูุตู
- **ุนุฏุงุฏ ููุช**: ูุนุฑุถ ุงูููุช ุงููุชุจูู ุจุดูู ุญู
- โ **ุฅุฐุง ุตุญูุญ**: ุงูุงูุชูุงู ูุตูุญุฉ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- โ **ุฅุฐุง ุฎุทุฃ**: ุนุฑุถ ุงููุญุงููุงุช ุงููุชุจููุฉ
- โฐ **ุฅุฐุง ุงูุชูู ุงูููุช**: ุฅูุบุงุก ุงูุนูููุฉ

### 3๏ธโฃ **Reset Password Page**
- ุงููุณุชุฎุฏู ูุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
- ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
- โ **ุฅุฐุง ูุฌุญ**: ุงูุนูุฏุฉ ูุตูุญุฉ Login
- โ **ุฅุฐุง ูุดู**: ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ

---

## ๐๏ธ ุงูุชูููุฐ ุงูุชููู

### ๐ง **Email Configuration**
```
ุงูุจุฑูุฏ: noransmartai@gmail.com
App Password: fxhm embd lhtm yeva
```

### ๐๏ธ **Backend Files**

#### 1. **Model: OTP Schema**
๐ `Web/backend/src/models/otp.js`
```javascript
- email: String (required)
- otp: String (required, 6 digits)
- attempts: Number (max 5)
- resendAttempts: Number (max 3)
- createdAt: Date (expires after 300 seconds = 5 minutes)
```

#### 2. **Service: Email Service**
๐ `Web/backend/src/services/emailService.js`
- ุฅุฑุณุงู OTP ุนุจุฑ Gmail
- ุชุตููู HTML ุฃููู ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- ูุญุชูู ุนูู:
  - ุฑูุฒ ุงูุชุญูู ุจุฎุท ูุจูุฑ ููุงุถุญ
  - ุชูุจูู ุจุงููุฏุฉ (5 ุฏูุงุฆู)
  - ุชูุจูู ุจุนุฏุฏ ุงููุญุงููุงุช (5)
  - ุชูุจูู ุจุนุฏุฏ ูุฑุงุช ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู (3)

#### 3. **Controller: Password Reset**
๐ `Web/backend/src/controllers/passwordResetController.js`

**ุงููุธุงุฆู:**
- `forgotPassword`: ุฅุฑุณุงู OTP
- `resendOTP`: ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP
- `verifyOTP`: ุงูุชุญูู ูู OTP
- `resetPassword`: ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

#### 4. **Routes: Password Reset**
๐ `Web/backend/src/routes/passwordResetRoutes.js`

**Endpoints:**
```
POST /api/auth/forgot-password  - ุฅุฑุณุงู OTP
POST /api/auth/resend-otp       - ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP
POST /api/auth/verify-otp       - ุงูุชุญูู ูู OTP
POST /api/auth/reset-password   - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
```

---

### ๐ฑ **Flutter Pages**

#### 1. **Forget Password Page**
๐ `Mobile Application/lib/features/auth/forget_password_page.dart`
- ุญูู ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- Validation ููุจุฑูุฏ
- ุฒุฑ ุฅุฑุณุงู OTP
- Info Box ูุน ุงูุชูุจููุงุช

#### 2. **OTP Page**
๐ `Mobile Application/lib/features/auth/otp_page.dart`
- 6 ุญููู ูููุตูุฉ ููุฃุฑูุงู
- Timer ุจุนุฏุงุฏ ุชูุงุฒูู (5 ุฏูุงุฆู)
- ุฒุฑ ุงูุชุญูู
- ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู (ูุน ุนุฏุงุฏ ุงููุญุงููุงุช)
- Info Box ูุน ุงูููุงุญุธุงุช

**ุงููููุฒุงุช:**
- Auto-focus ุนูู ุงูุญูู ุงูุชุงูู
- ุชุบููุฑ ููู Timer ุนูุฏ ุงูุซูุงูู ุงูุฃุฎูุฑุฉ
- ุชุนุทูู ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู ุจุนุฏ 3 ูุฑุงุช

#### 3. **Reset Password Page**
๐ `Mobile Application/lib/features/auth/reset_password_page.dart`
- ุญูู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
- ุญูู ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
- Show/Hide Password
- ูุชุทูุจุงุช ูููุฉ ุงููุฑูุฑ
- ุฒุฑ ุญูุธ

---

### ๐ **API Service Updates**
๐ `Mobile Application/lib/core/network/api_service.dart`

**ูุธุงุฆู ุฌุฏูุฏุฉ:**
```dart
forgotPassword(email)      // ุฅุฑุณุงู OTP
resendOTP(email)           // ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP
verifyOTP(email, otp)      // ุงูุชุญูู ูู OTP
resetPassword(email, password, confirmPassword)  // ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
```

---

## ๐จ **ุงูุชุตููู ูุงูู UX**

### **ุงูุฃููุงู:**
- Primary: `#690000` (ุงูููุฑุงู ุงูุฃุญูุฑ)
- Success: `#28a745`
- Error: `#dc3545`
- Warning: `#ffc107`
- Info: `#17a2b8`

### **ุงูู Pop-ups:**
- โ Success ุนูุฏ ูุฌุงุญ ุงูุนูููุฉ
- โ Error ุนูุฏ ูุดู ุงูุนูููุฉ
- โ๏ธ Warning ููุชูุจููุงุช
- โน๏ธ Info ูููุนูููุงุช
- ๐ง SnackBar ููุฑุณุงุฆู ุงูุณุฑูุนุฉ

---

## ๐ **ุงูุฃูุงู ูุงูู Validation**

### **Backend:**
1. โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุจุฑูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ OTP ุนุดูุงุฆู (6 ุฃุฑูุงู)
3. โ ุงูุชูุงุก ุตูุงุญูุฉ ุชููุงุฆู ุจุนุฏ 5 ุฏูุงุฆู
4. โ ุญุฏ ุฃูุตู 5 ูุญุงููุงุช ุฎุงุทุฆุฉ
5. โ ุญุฏ ุฃูุตู 3 ูุฑุงุช ุฅุนุงุฏุฉ ุฅุฑุณุงู
6. โ ุญุฐู OTP ุจุนุฏ ุงูุชุญูู ุงููุงุฌุญ
7. โ ุชุดููุฑ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ (bcrypt)

### **Frontend:**
1. โ Email validation (regex)
2. โ Password validation (6 ุฃุญุฑู ุนูู ุงูุฃูู)
3. โ Password confirmation matching
4. โ OTP format validation (6 ุฃุฑูุงู)
5. โ Timer ููููุช ุงููุชุจูู
6. โ ุนุฏุงุฏ ุงููุญุงููุงุช ูุงูุฅุนุงุฏุงุช

---

## ๐ง **Email Template**

ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุญุชูู ุนูู:
- ๐ ุดุนุงุฑ ุงูููุฑุงู
- ๐จ ุชุตููู ุงุญุชุฑุงูู ุจุงูุนุฑุจู (RTL)
- ๐ข ุฑูุฒ OTP ุจุฎุท ูุจูุฑ ููุงุถุญ
- โฐ ุชูุจูู ุจุงููุฏุฉ (5 ุฏูุงุฆู)
- ๐ ุชูุจูู ุจุนุฏุฏ ุงููุญุงููุงุช (5)
- ๐ ุชูุจูู ุจุนุฏุฏ ูุฑุงุช ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู (3)
- โ๏ธ ุชุญุฐูุฑ ุฃููู (ุฅุฐุง ูู ุชุทูุจุ ุชุฌุงูู ุงูุจุฑูุฏ)

---

## ๐งช **ููููุฉ ุงูุชุฌุฑุจุฉ**

### 1. **ุชุดุบูู Backend:**
```bash
cd "c:\Al Noran\Al-Noran-System-Development\Web\backend"
npm run dev
```

### 2. **ุชุดุบูู Flutter:**
```bash
cd "c:\Al Noran\Al-Noran-System-Development\Mobile Application"
flutter run
```

### 3. **ุงูุณููุงุฑูู:**
1. ุงูุชุญ ุงูุชุทุจูู
2. ูู ุตูุญุฉ Loginุ ุงุถุบุท "ูุณูุช ูููุฉ ุงููุฑูุฑุ"
3. ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุซุงู: omar@alnoran.com)
4. ุงุถุบุท "ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู"
5. ุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู
6. ุฃุฏุฎู ุงูู OTP (6 ุฃุฑูุงู)
7. ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
8. ุชู! ููููู ุงูุขู ุชุณุฌูู ุงูุฏุฎูู

---

## ๐ฏ **ุงูููุฒุงุช ุงูุฅุถุงููุฉ**

### โจ **ุชูุงุตูู ุฏูููุฉ:**
1. ๐ฑ **Auto-focus**: ุงูุงูุชูุงู ุงูุชููุงุฆู ุจูู ุญููู OTP
2. โฒ๏ธ **Live Timer**: ุนุฏุงุฏ ููุช ุญู ูุชุบูุฑ ูู ุซุงููุฉ
3. ๐ด **Color Change**: ุชุบููุฑ ููู Timer ููุฃุญูุฑ ุนูุฏ ุขุฎุฑ ุฏูููุฉ
4. ๐ **Smart Resend**: ุชุนุทูู ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู ุจุนุฏ 3 ูุฑุงุช
5. ๐ **Attempt Counter**: ุนุฑุถ ุงููุญุงููุงุช ุงููุชุจููุฉ
6. ๐ซ **No Back**: ููุน ุงูุฑุฌูุน ูู ุตูุญุฉ Reset Password
7. ๐ง **RTL Email**: ุชุตููู ุงูุจุฑูุฏ ุจุงูุนุฑุจู ูู ุงููููู ูููุณุงุฑ

---

## ๐ **ุฑุณุงุฆู ุงูุฃุฎุทุงุก (ุจุงูุนุฑุจู)**

### Backend:
- โ "ูู ูุถูู ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู"
- โ "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ูุณุฌู ูุฏููุง"
- โ "ุชู ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู ุฅูู ุจุฑูุฏู ุงูุฅููุชุฑููู"
- โ "ุฑูุฒ ุงูุชุญูู ููุชูู ุงูุตูุงุญูุฉ ุฃู ุบูุฑ ููุฌูุฏ"
- โ "ุฑูุฒ ุงูุชุญูู ุบูุฑ ุตุญูุญ. ุงููุญุงููุงุช ุงููุชุจููุฉ: X"
- โ "ุชู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ูููุญุงููุงุช (5 ูุญุงููุงุช)"
- โ "ุชู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ูุฅุนุงุฏุฉ ุงูุฅุฑุณุงู (3 ูุฑุงุช)"
- โ "ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ"

### Frontend:
- โ "ูู ูุถูู ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู"
- โ "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ"
- โ "ูู ูุถูู ุฃุฏุฎู ุฑูุฒ ุงูุชุญูู ูุงููุงู (6 ุฃุฑูุงู)"
- โ "ูููุฉ ุงููุฑูุฑ ูุฌุจ ุฃู ุชููู 6 ุฃุญุฑู ุนูู ุงูุฃูู"
- โ "ูููุฉ ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุฉ"

---

## โ **ุงููููุงุช ุงููููุดุฃุฉ/ุงูููุนุฏููุฉ**

### Backend:
- โ `src/models/otp.js` (ุฌุฏูุฏ)
- โ `src/services/emailService.js` (ุฌุฏูุฏ)
- โ `src/controllers/passwordResetController.js` (ุฌุฏูุฏ)
- โ `src/routes/passwordResetRoutes.js` (ุฌุฏูุฏ)
- โ `src/server.js` (ุชุญุฏูุซ - ุฅุถุงูุฉ routes)

### Flutter:
- โ `lib/features/auth/forget_password_page.dart` (ุฌุฏูุฏ)
- โ `lib/features/auth/otp_page.dart` (ุฌุฏูุฏ)
- โ `lib/features/auth/reset_password_page.dart` (ุฌุฏูุฏ)
- โ `lib/core/network/api_service.dart` (ุชุญุฏูุซ - ุฅุถุงูุฉ 4 ูุธุงุฆู)
- โ `lib/features/auth/login_page.dart` (ุชุญุฏูุซ - ุฑุจุท ุจู Forget Password)

---

## ๐ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**

ุงููุธุงู ูุงูู ููุชูุงูู ูุน:
- โ Email ููุฑุณู ุนุจุฑ Gmail
- โ OTP ุตุงูุญ ููุฏุฉ 5 ุฏูุงุฆู
- โ 5 ูุญุงููุงุช ูุญุฏ ุฃูุตู
- โ 3 ูุฑุงุช ุฅุนุงุฏุฉ ุฅุฑุณุงู ูุญุฏ ุฃูุตู
- โ ุชุตููู ุฃููู ููุชุฌุงูุจ
- โ ุฑุณุงุฆู ุจุงูุนุฑุจู
- โ Pop-ups ูุฎุตุตุฉ
- โ Validation ุดุงูู

**ูู ุงูุชูุงุตูู ุงููู ุทูุจุชูุง ููุฌูุฏุฉ ูููููุฐุฉ! ๐**
